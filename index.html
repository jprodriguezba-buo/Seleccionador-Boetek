<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de ACS</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Se agrega la librería Chart.js para los gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="header">
        <div class="logo-container">
            <img id="logobtk" src="./Images/Boetek PNG.png" alt="Logo Boetek">
            <span class="version-indicator">v 1.1</span>
        </div>
        <h1>Calculadora de ACS</h1>
    </div>
    <div class="main-container">
        <form id="calculadora-form">
            <h2>Ingreso de Departamentos</h2>
            <table id="depto-table">
                <thead>
                    <tr>
                        <th>Cant. De Dormitorios</th>
                        <th>Pers / depto</th>
                        <th>Unidades</th>
                        <th>Total Personas</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1 dormitorio</td>
                        <td>1,5</td>
                        <td><input type="number" id="unidades-1" min="0" value="0"></td>
                        <td class="total-personas-row" data-pers="1.5"></td>
                    </tr>
                    <tr>
                        <td>2 dormitorios</td>
                        <td>3</td>
                        <td><input type="number" id="unidades-2" min="0" value="0"></td>
                        <td class="total-personas-row" data-pers="3"></td>
                    </tr>
                    <tr>
                        <td>3 dormitorios</td>
                        <td>4</td>
                        <td><input type="number" id="unidades-3" min="0" value="0"></td>
                        <td class="total-personas-row" data-pers="4"></td>
                    </tr>
                    <tr>
                        <td>4 dormitorios</td>
                        <td>6</td>
                        <td><input type="number" id="unidades-4" min="0" value="0"></td>
                        <td class="total-personas-row" data-pers="6"></td>
                    </tr>
                    <tr>
                        <td>5 dormitorios</td>
                        <td>7</td>
                        <td><input type="number" id="unidades-5" min="0" value="0"></td>
                        <td class="total-personas-row" data-pers="7"></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2"><strong>Total:</strong></td>
                        <td id="total-unidades"></td>
                        <td id="total-personas-general"></td>
                    </tr>
                </tfoot>
            </table>

            <div class="form-group">
                <label for="demanda-guia">Guía de Demanda:</label>
                <select id="demanda-guia" required>
                    <option value="low">Baja</option>
                    <option value="low-medium" selected>Baja-Media</option>
                    <option value="medium">Media</option>
                    <option value="high">Alta</option>
                </select>
            </div>

            <h2>Parámetros del Sistema</h2>
            <div class="form-group">
                <label for="acumulacion-ingresada">Acumulación (Litros):</label>
                <input type="number" id="acumulacion-ingresada" min="0" value="1000" required>
            </div>
            <div class="form-group">
                <label for="potencia-ingresada">Potencia Térmica (kW):</label>
                <input type="number" id="potencia-ingresada" min="0" value="300" required>
            </div>

            <div class="param-fijos">
                <div class="header">
                    <h3>Datos Fijos</h3>
                    <button type="button" id="edit-params-btn">Editar</button>
                </div>

                <div id="param-view-mode">
                    <table>
                        <tbody>
                            <tr><td>Eficiencia</td><td id="view-eficiencia">90%</td></tr>
                            <tr><td>% uso acumulador</td><td id="view-uso-acumulador">80%</td></tr>
                            <tr><td>Temperatura agua fría</td><td id="view-temp-fria">10°C</td></tr>
                            <tr><td>Temperatura de acumulación</td><td id="view-temp-acumulacion">50°C</td></tr>
                            <tr><td>Temperatura de consumo</td><td id="view-temp-consumo">50°C</td></tr>
                        </tbody>
                    </table>
                </div>

                <div id="param-edit-mode" style="display:none;">
                    <table>
                        <tbody>
                            <tr>
                                <td>Eficiencia</td>
                                <td><input type="number" id="edit-eficiencia" value="0.90" step="0.01" min="0.5" max="1.0"></td>
                            </tr>
                            <tr>
                                <td>% uso acumulador</td>
                                <td><input type="number" id="edit-uso-acumulador" value="0.80" step="0.01" min="0.1" max="1.0"></td>
                            </tr>
                            <tr>
                                <td>Temperatura agua fría</td>
                                <td><input type="number" id="edit-temp-fria" value="10" min="0" max="30"></td>
                            </tr>
                            <tr>
                                <td>Temperatura de acumulación</td>
                                <td><input type="number" id="edit-temp-acumulacion" value="50" min="45" max="80"></td>
                            </tr>
                            <tr>
                                <td>Temperatura de consumo</td>
                                <td><input type="number" id="edit-temp-consumo" value="50" min="40" max="60"></td>
                            </tr>
                        </tbody>
                    </table>
                    <button type="button" id="save-params-btn">Guardar</button>
                </div>
            </div>
        </form>

        <div class="resultados-wrapper" id="resultados">
            <div class="resultados-main">
                <h3>Resultados de la Comparación</h3>
                <table id="resultado-table">
                    <thead>
                        <tr>
                            <th>Parámetro</th>
                            <th>Valor Requerido (ASHRAE)</th>
                            <th>Valor Ingresado</th>
                            <th>Estado</th>
                            <th class="boetek-col">Monitoreo (Boetek)</th>
                            <th class="sobre-dimensionamiento-col">% Sobredimensionamiento</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Los resultados se insertan aquí dinámicamente -->
                    </tbody>
                </table>
            </div>

            <!-- Contenedor para los gráficos con pestañas -->
            <div class="chart-section">
                <div class="chart-tabs">
                    <button id="tab-line" class="active">Perfil Diario (L/min)</button>
                    <button id="tab-bar">Consumo por Hora (L)</button>
                </div>
                <div id="line-chart-container" class="chart-container">
                    <canvas id="lineChart"></canvas>
                </div>
                <div id="bar-chart-container" class="chart-container" style="display: none;">
                    <canvas id="barChart"></canvas>
                </div>
            </div>

            <div class="produccion-continua-box">
                <h4>Caudales Instantáneos</h4>
                <p>Caudal a 50°C: <span id="produccion-continua-50c"></span> L/min</p>
                <p>Caudal a Temp. Consumo (<span id="prod-continua-temp">50</span>°C): <span id="produccion-continua-valor"></span> L/min</p>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>